<!DOCTYPE html>
<!--
Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
-->
<html>
<head>
	<meta charset="utf-8">
	<title>Balloon Panel &mdash; CKEditor Sample</title>
	<script src="../../../ckeditor.js"></script>
	<link href="../../../samples/sample.css" rel="stylesheet">
</head>
<body>
	<h1 class="samples">
		<a href="index.html">CKEditor Samples</a> &raquo; Balloon Panel
	</h1>

	<h2>Classic editor</h2>
	<textarea cols="80" id="editor1" name="editor1" rows="10">
		<h1>Apollo 11</h1>
		<p><strong>Apollo 11</strong> was the spaceflight that landed.</p>
	</textarea>
	<button type="button" onclick="attachPanel( CKEDITOR.instances.editor1 )">Attach Panel</button>

	<h2>Inline editor</h2>
	<div contenteditable="true" id="editor2">
		<p>Apollo 11</p>
		<p><strong>Apollo 11</strong>&nbsp;was the spaceflight that landed <strong>the first</strong> humans, Americans&nbsp;Neil Armstrong&nbsp;and&nbsp;Buzz Aldrin, on the Moon on July 20, <strong>1969</strong>, at 20:18 UTC. Armstrong became the first <strong>to step onto the</strong> lunar surface 6 hours later on July 21 at <strong>02:56</strong> UTC.</p>
		<p>Armstrong spent about&nbsp;<s>three and a half</s>&nbsp;two and a half hours <strong>outside the spacecraft</strong>, Aldrin slightly less; and together they collected 47.5 pounds (21.5&nbsp;kg) of lunar material for return to Earth. A third member of the mission,&nbsp;Michael Collins, piloted the&nbsp;command&nbsp;<strong>spacecraft alone in lunar</strong> orbit until Armstrong and Aldrin <strong>returned to it for the trip</strong> back to Earth.</p>
	</div>

	<script>

		CKEDITOR.disableAutoInline = true;

		function attachPanel( editor ) {
			editor.balloonPanel.attach( editor.editable().findOne( 'strong' ) );
		}

		CKEDITOR.config.toolbarGroups = [
			{ name: 'mode' },
			{ name: 'basicstyles' }
		];

		var editor1 = CKEDITOR.replace( 'editor1', {
			extraPlugins: 'balloonpanel',
			on: {
				instanceReady: function() {
					this.balloonPanel = new CKEDITOR.ui.balloonPanel( this, {
						title: 'My Panel',
						width: 600,
						content: '<p style="padding: 10px">This is my panel</p>'
					} );

					attachPanel( this );
				}
			}
		} );

		var editor2 = CKEDITOR.inline( 'editor2', {
			extraPlugins: 'balloonpanel',
			on: {
				instanceReady: function() {
					// Change some of the templates.
					var customTemplateDefinitions = CKEDITOR.tools.extend( {}, CKEDITOR.ui.balloonPanel.prototype.templateDefinitions, {
						title: '<div style="display:none"></div>',
						close: '<div style="display:none"></div>'
					}, true );

					var panel = new CKEDITOR.ui.balloonPanel( this, {
						width: 'auto',
						height: 200,
						templateDefinitions: customTemplateDefinitions
					} );

					var strongs = this.editable().find( 'strong' ),
						i = 0,
						strong;

					panel.on( 'attach', function( evt ) {
						console.log( 'Panel attached!' );

						panel.parts.content.setHtml( '<p style="padding: 10px">Clicked element: ' + strong.getName() + ' ("' + strong.getText() + '")</p>' );
					} );

					while ( ( strong = strongs.getItem( i++ ) ) ) {
						strong.setStyle( 'background', 'pink' );
						strong.setStyle( 'outline', '4px solid red' );
						strong.on( 'click', function() {
							strong = this;
							panel.attach( this );
						} );
					}
				}
			}
		} );

	</script>
	<div id="footer">
		<hr>
		<p>
			CKEditor - The text editor for the Internet - <a class="samples" href="http://ckeditor.com/">http://ckeditor.com</a>
		</p>
		<p id="copy">
			Copyright &copy; 2003-2016, <a class="samples" href="http://cksource.com/">CKSource</a> - Frederico
			Knabben. All rights reserved.
		</p>
	</div>
</body>
</html>
